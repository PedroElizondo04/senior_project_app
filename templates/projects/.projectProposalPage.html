{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Project Proposal</title>

  <!-- Bulma CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css" rel="stylesheet">

  <!-- Custom Styles -->
  <link href="{% static 'css/style.css' %}" rel="stylesheet">
</head>

<body class="has-navbar-fixed-top">

  <!-- Navbar -->
  <nav class="navbar is-dark is-fixed-top" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
      <a class="navbar-item navbar-name" style="padding-left: 0;">
        {{ user.first_name }} {{ user.last_name }}, <span class="role">{{ role }}</span>
      </a>

      <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navMenu">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div id="navMenu" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" style="padding-right: 0;">
          <img src="{% static 'utrgv.png' %}" alt="UTRGV Logo" class="logo" />
        </a>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <section class="section">
    <div class="container">

      <!-- Back Button -->
      <a href="{% url 'landingPage' %}" class="button is-light mb-5">
        ‚Üê Back to Landing Page
      </a>

      <!-- Form -->
      <form method="POST" action="{% if project %}{% url 'projectProposal' project.id %}{% else %}{% url 'projectProposal' %}{% endif %}">
        {% csrf_token %}

        <!-- Project Title Input -->
        <div class="field">
          <div class="control">
            <input
              type="text"
              name="title"
              class="input is-large has-background-light has-text-black"
              placeholder="Project Title"
              value="{{ project.title if project else '' }}"
              style="background-color: #d3d3d3; border: none; font-weight: bold;"
              required
            >
          </div>
        </div>

        <!-- Project Description Textarea -->
        <div class="field">
          <div class="control">
            <textarea
              name="description"
              id="description"
              class="textarea has-background-light has-text-black"
              placeholder="Description"
              style="background-color: #d3d3d3; border: none; font-weight: bold; min-height: 240px;"
              required
            >{{ project.description if project else '' }}</textarea>
          </div>
        </div>

        <div class="columns is-mobile">

          <!-- Skills Input -->
          <div class="column">
            <div class="field" style="max-width: 400px;">
              <label class="label label-special">Skills needed:</label>
              <div class="control">
                <input
                  type="text"
                  name="skills"
                  id="skills"
                  class="input has-background-light has-text-black"
                  placeholder="Ex.) Rust, Algorithms, Linux, C++, CLI"
                  value="{{ project.skills_required.all|join:', ' if project else '' }}"
                  style="background-color: #d3d3d3; border: none; font-weight: bold;"
                >
              </div>
            </div>
          </div>

          <!-- Members Dropdown -->
          <div class="column">
            <div class="field">
              <label class="label label-special" for="members">Members:</label>
              <div class="control">
                <div class="select is-custom">
                  <select name="member_limit" id="members">
                    <option value="2" {% if project and project.member_limit == 2 %}selected{% endif %}>2</option>
                    <option value="3" {% if project and project.member_limit == 3 %}selected{% endif %}>3</option>
                    <option value="4" {% if project and project.member_limit == 4 %}selected{% endif %}>4</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

        </div>

        <!-- Submit Button (changed to Save Changes if editing) -->
        <div class="button-right-align">
          <button type="submit" class="button is-gray is-medium" style="padding: 1rem 2rem;">
            {% if project %}Save Changes{% else %}Submit{% endif %}
          </button>
        </div>
      </form>

    </div>
  </section>

</body>

</html>
